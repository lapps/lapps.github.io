---
layout: default
title: URI Inventory
---

# The LAPPS URI Inventory

<div class="note"><em>WIP</em> This page is a work in progress.</div>

The [LAPPS URI Inventory](http://vocab.lappsgrid.org/discriminators) is the set of all URIs recognized by LAPPS Grid services. The URIs in the inventory fall into two categories:

1. [Web Service Exchange Vocabulary](http://vocab.lappsgrid.org) (or simply "The Vocabulary")<br/>The URI used for annotation types produced and consumed by LAPPS services.  For example the URIs for [Token](http://vocab.lappsgrid.org/Token) and [Sentence](http://vocab.lappsgrid.org/Sentence).
1. Metadata<br/>Anything that is not a vocabulary URI is metadata about something else. These are often referred to as *discriminators* since they are the URI used as the value of the `discriminator` field in [org.lappsgrid.serialization.Data](http://wiki.lappsgrid.org/org.lappsgrid.serialization/groovydoc/org/lappsgrid/serialization/Data.html) objects.

For historical reasons the Discriminator DSL language includes keywords and provisions for concepts that no longer apply.  In particular, *parents*, *offset*, and *bank* will go away in the near future. 

The only important fields are *uri* and *description*, and only *uri* is required.  

## URI

All URI in the LAPPS inventory begin with <tt>http://vocab.lappsgrid.org</tt> and URI that are not one of the *vocabulary types* begin with <tt>http://vocab.lappsgrid.org/ns</tt>.

## Syntax

A BNF(-ish) grammar for the Discriminator DSL:

```html
<dsl>         ::= ( <include> | <decl> | <groovy> )+
<include>     ::= 'include' <string>
<decl>        ::= <type-string> '{' <decl-body> '}'
<type-string> ::= <ident> | <string>
<decl-body>   ::= <uri> <eol> <description>
<uri>         ::= 'uri' <string>
<description> ::= 'description' <string>
<eol>         ::= ';' | '\n'

<groovy>      ::= any syntactically correct Groovy statements
<ident>       ::= any valid Groovy identifier
<string>      ::= anything that evaluates to a java.lang.String
```

### Grammar Notes

The order of the `uri` and `description` in the `decl-body` does not matter.

Every line can be terminated with a semicolon, but semicolons and whitespace handling are omitted in the grammar for brevity.

Since the Disciminators DSL is a [Groovy DSL](/technical/dsl) Groovy code can be used almost anywhere. For example, the `discriminators.config` file defines several closures that are used to generate URI.

```groovy
vocab = { "http://vocab.lappsgrid.org/$it" }
...
token {
	uri vocab('Token')
	description '...'
}
```

# Vocabulary DSL

*The Vocabulary* is a sub-set of the full URI inventory that is used to denote annotation types.

# Creating Vocabularies

- Generating HTML pages
  - http://vocab.lappsgrid.org
  - http://vocab.lappsgrid.org/discriminators
- Generating Java code
  - org.lappsgrid.discriminator
  - org.lappsgrid.vocabulary
- Deployment

#### Generate the vocabulary.config file

The <tt>vocabulary.config</tt> file is a Discriminator DSL fragment that is included by the *discriminator.config* file.

```bash
./vocab -d -o target/ lapps.vocab
```

OPTIONS

- **-d** generate discriminators dsl fragment for the vocabulary items.
- The **-o** option specifies the output directory. This should be the *target* directory.

#### Generate the discriminator.html file

```bash
./ddsl -h target/discriminator.html -t discriminator-html.template discriminator.config
```

OPTIONS

- **-h** generate the index html page listing all discriminators. 
- **-t** the template file used to generate the html

#### Generate individual discriminator pages

Pages in the http://vocab.lappsgrid.org/ns namespace need to be generated . All other http://vocab.lappsgrid.org pages are generated by the Vocabulary DSL.

```bash
./ddsl -p target/ -t discriminator-page.template discriminator.config
```

{{ site.top }}

