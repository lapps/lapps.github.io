<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Groovy DSL</title>
    <meta name="description" content="An open framework for NLP web services"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/assets/css/cayman.css?v=840795ad2b8006f43e8125e2699e7ed07f89ec18">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">The Language Applications Grid</h1>
      <h2 class="project-tagline">An open framework for NLP web services</h2>
      <!--
      
        <a href="https://github.com/lapps/lapps" class="btn">View on GitHub</a>
      
      
      <a href="#" class="btn">Installing</a>
      <a href="#" class="btn">For Users</a>
      <a href="#" class="btn">For Developers</a>
      -->
      
      	<a href="getting_started.html" class="btn">Getting Started</a>
      
      	<a href="/code/examples.html" class="btn">Examples</a>
      
      	<a href="support.html" class="btn">Support</a>
      
    </section>

    <section class="main-content">
      <h2 id="the-language-applications-grid-and-groovy-dsls">The Language Applications Grid and Groovy DSLs</h2>

<blockquote>
  <p>A <em>Domain Specific Language</em> (DSL) is a computer programming language specialized to a specific application domain. [1]</p>
</blockquote>

<p>The Language Applications Grid (LAPPS Grid, or just LAPPS) uses several domain specific languages:</p>

<ol>
  <li>LAPPS Services DSL (LSD)</li>
  <li>LAPPS Database Definition Language (LDDL)</li>
  <li>Vocabulary DSL</li>
  <li>Discirminator DSL</li>
</ol>

<p>LSD is basically just Groovy bundled with the LAPPS API modules that are automatically imported into user scripts. The other three can be thought of executable configuration languages. To effectively leverage these languages it is important to understand how a Groovy DSL is constructed and operates.</p>

<h2 id="it-is-all-just-groovy">It is all just Groovy</h2>

<p>While the syntax may look odd at times, every DSL is a syntactically correct Groovy program.</p>

<h4 id="lists-and-maps">Lists and Maps</h4>
<p>Creating instances of ArrayList and HashMap is concise and lists and maps can be initialized when they are defined.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kt">def</span> <span class="n">list</span> <span class="o">=</span> <span class="o">[</span> <span class="s1">'one'</span><span class="o">,</span> <span class="s1">'two'</span><span class="o">,</span> <span class="s1">'three'</span> <span class="o">]</span>
<span class="kt">def</span> <span class="n">map</span> <span class="o">=</span> <span class="o">[</span><span class="nl">key:</span><span class="s1">'value'</span><span class="o">,</span> <span class="nl">foo:</span><span class="s1">'bar'</span><span class="o">]</span>
</code></pre>
</div>

<p>If the map keys are strings the ‘dot syntax’ can be used to fetch/set values. Array style access is also supported.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kt">def</span> <span class="n">map</span> <span class="o">=</span> <span class="o">[</span><span class="nl">key:</span><span class="s1">'value'</span><span class="o">,</span> <span class="nl">foo:</span><span class="s1">'bar'</span><span class="o">]</span>
<span class="k">assert</span> <span class="n">map</span><span class="o">.</span><span class="na">key</span> <span class="o">==</span> <span class="s1">'value'</span>
<span class="k">assert</span> <span class="n">map</span><span class="o">[</span><span class="s1">'key'</span><span class="o">]</span> <span class="o">==</span> <span class="s1">'value'</span>
<span class="k">assert</span> <span class="n">map</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s1">'key'</span><span class="o">)</span> <span class="o">==</span> <span class="s1">'value'</span>
</code></pre>
</div>

<h4 id="calling-functions">Calling Functions</h4>

<p>Method/function calls do not require parenthesis.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">println</span> <span class="s2">"hello world"</span>
<span class="n">println</span><span class="o">(</span><span class="s2">"hello world"</span><span class="o">)</span>
</code></pre>
</div>

<p>Groovy will collect <code class="highlighter-rouge">name:value</code> parameters together and pass them as a single map.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">doSomething</span> <span class="nl">foo:</span><span class="s1">'bar'</span><span class="o">,</span> <span class="nl">name:</span><span class="s1">'value'</span><span class="o">,</span> <span class="s1">'hello world'</span>

<span class="kt">void</span> <span class="nf">doSomething</span><span class="o">(</span><span class="n">Map</span> <span class="n">parameters</span><span class="o">,</span> <span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span> 
	<span class="k">assert</span> <span class="n">parameters</span><span class="o">.</span><span class="na">foo</span> <span class="o">==</span> <span class="s1">'bar'</span>
	<span class="k">assert</span> <span class="n">parameters</span><span class="o">.</span><span class="na">name</span> <span class="o">==</span> <span class="s1">'value'</span>
	<span class="k">assert</span> <span class="n">message</span> <span class="o">==</span> <span class="s1">'hello world'</span>
<span class="o">}</span>
</code></pre>
</div>

<p>Closures can also be passed as parameters.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">runIt</span><span class="o">(</span><span class="n">Closure</span> <span class="n">cl</span><span class="o">)</span> <span class="o">{</span>
	<span class="n">cl</span><span class="o">()</span>
<span class="o">}</span>

<span class="kt">def</span> <span class="n">closure</span> <span class="o">=</span> <span class="o">{</span> <span class="n">println</span> <span class="s1">'Hello world'</span> <span class="o">}</span>
<span class="n">runIt</span><span class="o">(</span><span class="n">closure</span><span class="o">)</span>
</code></pre>
</div>

<p>If the closure is the last parameter to the function the closure may be defined at the same time that it is used.  That is, there is no need to assign the closure to a variable unless it is being used in more than one location.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">runIt</span> <span class="o">{</span>
	<span class="n">println</span> <span class="s2">"hello world"</span>
<span class="o">}</span>
</code></pre>
</div>

<p>If we add all of the above together we can write things like:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">box</span> <span class="nl">width:</span><span class="mi">50</span><span class="o">,</span> <span class="nl">height:</span> <span class="mi">20</span><span class="o">,</span> <span class="nl">border:</span><span class="s1">'1px solid black'</span> <span class="o">{</span>
	<span class="n">paragraph</span> <span class="s1">'Your text here.'</span>
<span class="o">}</span>
</code></pre>
</div>

<p>This is calling a function named <code class="highlighter-rouge">box</code> and passing two parameters, a <code class="highlighter-rouge">HashMap</code> and a <code class="highlighter-rouge">Closure</code>. The <code class="highlighter-rouge">HashMap</code> contains three elements with the keys <em>width</em>, <em>height</em>, and <em>border</em>. The closure in turn calls a function name paragraph with a single string parameter.</p>

<h3 id="method-delegation">Method Delegation</h3>

<p>Groovy’s method resolution and delegation strategies are beyond the scope of this article, but having some understanding of delegates and metaclasses is important when designing a Groovy DSL.</p>

<h4 id="class-delegates">Class Delegates</h4>

<p>If a method to be invoked can not be found in the class definition Groovy will check if a delegate has been defined. If a delegate has been defined Groovy will look in the delegate instance for the method before searching up the inheritance chain.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Company</span> <span class="o">{</span>
	<span class="kt">int</span> <span class="nf">orderPart</span><span class="o">(</span><span class="kt">int</span> <span class="n">quantity</span><span class="o">)</span> <span class="o">{</span> <span class="k">return</span> <span class="n">quantity</span> <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">StockItem</span> <span class="o">{</span>
	<span class="n">String</span> <span class="n">partNumber</span>
	<span class="nd">@Delegate</span>
	<span class="n">Company</span> <span class="n">company</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Company</span><span class="o">()</span>
	<span class="nd">@Delegate</span>
	<span class="n">List</span> <span class="n">parts</span> <span class="o">=</span> <span class="o">[]</span>
<span class="o">}</span>
<span class="n">StockItem</span> <span class="n">item</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StockItem</span><span class="o">(</span><span class="nl">partNumber:</span><span class="s1">'00-0000-000'</span><span class="o">)</span>
<span class="k">assert</span> <span class="n">item</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">0</span> <span class="c1">// delgates to List.size()</span>
<span class="n">item</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s1">'thingamajig'</span><span class="o">)</span> <span class="c1">//delegates to List.add()</span>
<span class="n">item</span> <span class="o">&lt;&lt;</span> <span class="s1">'whatchamacallit'</span> <span class="c1">// delegates to List.leftShift()</span>
<span class="k">assert</span> <span class="n">item</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">==</span> <span class="mi">2</span>
<span class="k">assert</span> <span class="n">item</span><span class="o">.</span><span class="na">orderPart</span><span class="o">(</span><span class="mi">10</span><span class="o">)</span> <span class="o">==</span> <span class="mi">10</span> <span class="c1">// delegates to Company.orderPart()</span>
</code></pre>
</div>

<p>If more than one <code class="highlighter-rouge">@Delegate</code> contains a matching method the method from the first delegate defined is chosen.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">D1</span> <span class="o">{</span> 
	<span class="n">String</span> <span class="nf">foo</span><span class="o">()</span> <span class="o">{</span> <span class="s1">'d1'</span> <span class="o">}</span> 
<span class="o">}</span>
<span class="kd">class</span> <span class="nc">D2</span> <span class="o">{</span> 
	<span class="n">String</span> <span class="nf">foo</span><span class="o">()</span> <span class="o">{</span> <span class="s1">'d2'</span> <span class="o">}</span>
<span class="o">}</span>
<span class="kd">class</span> <span class="nc">Root</span> <span class="o">{</span>
	<span class="nd">@Delegate</span> 
	<span class="n">D1</span> <span class="n">d1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">D1</span><span class="o">()</span>
	<span class="nd">@Delegate</span> 
	<span class="n">D2</span> <span class="n">d2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">D2</span><span class="o">()</span>
<span class="o">}</span>
<span class="k">assert</span> <span class="k">new</span> <span class="nf">Root</span><span class="o">().</span><span class="na">foo</span><span class="o">()</span> <span class="o">==</span> <span class="s1">'d1'</span>
</code></pre>
</div>

<h4 id="closure-delegates">Closure Delegates</h4>

<p>Delegate objects can also be set for closures.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kt">def</span> <span class="n">greet</span> <span class="o">=</span> <span class="o">{</span> <span class="n">echo</span> <span class="s2">"Hello $it"</span> <span class="o">}</span>
<span class="n">greet</span><span class="o">(</span><span class="s1">'Alice'</span><span class="o">)</span>  <span class="c1">// MissingMethodException : echo()</span>

<span class="kd">class</span> <span class="nc">Greeter</span> <span class="o">{</span>
	<span class="kt">void</span> <span class="nf">echo</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span> <span class="n">println</span> <span class="n">message</span> <span class="o">}</span>
<span class="o">}</span>	
<span class="n">greet</span><span class="o">.</span><span class="na">delegate</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Greeter</span><span class="o">()</span>
<span class="n">greet</span><span class="o">(</span><span class="s1">'Bob'</span><span class="o">)</span> <span class="c1">// delegates to Greeter.echo()</span>
</code></pre>
</div>

<p>Groovy closures also have an <em>owner</em>, which is the object that invoked the closure and will either be a class instance or another closure.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">String</span> <span class="nf">echo</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span> <span class="k">return</span> <span class="n">message</span> <span class="o">}</span>
<span class="kt">def</span> <span class="n">greet</span> <span class="o">=</span> <span class="o">{</span> <span class="n">echo</span> <span class="s2">"Hello $it"</span> <span class="o">}</span>  <span class="c1">// Resolves to the echo() method in the owner class</span>
<span class="k">assert</span> <span class="s1">'Hello Bob'</span> <span class="o">==</span> <span class="n">greet</span><span class="o">(</span><span class="s1">'Bob'</span><span class="o">)</span>
</code></pre>
</div>

<p>We can control how Groovy chooses between methods in the <em>owner</em> or <em>delegate</em> by setting the <code class="highlighter-rouge">resolveStrategy</code> property on the closure.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">String</span> <span class="nf">echo</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="s1">'owner'</span> <span class="o">}</span>

<span class="kd">class</span> <span class="nc">Delegate</span> <span class="o">{</span>
	<span class="n">String</span> <span class="nf">echo</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="s1">'delegate'</span> <span class="o">}</span>
<span class="o">}</span>

<span class="kt">def</span> <span class="n">test</span> <span class="o">=</span> <span class="o">{</span> <span class="n">echo</span><span class="o">()</span> <span class="o">}</span>
<span class="n">test</span><span class="o">.</span><span class="na">delegate</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Delegate</span><span class="o">()</span>
<span class="k">assert</span> <span class="nf">test</span><span class="o">()</span> <span class="o">==</span> <span class="s1">'owner'</span>  <span class="c1">// dispatches to the owner by default</span>
<span class="n">test</span><span class="o">.</span><span class="na">resolveStrategy</span> <span class="o">=</span> <span class="n">Closure</span><span class="o">.</span><span class="na">DELEGATE_FIRST</span>
<span class="k">assert</span> <span class="nf">test</span><span class="o">()</span> <span class="o">==</span> <span class="s1">'delegate'</span>
</code></pre>
</div>

<p>The possible values for <code class="highlighter-rouge">resolveStrategy</code> are:</p>

<ul>
  <li>Closure.OWNER_FIRST</li>
  <li>Closure.OWNER_ONLY</li>
  <li>Closure.DELEGATE_FIRST</li>
  <li>Closure.DELEGATE_ONLY</li>
</ul>

<h4 id="metaprogramming-and-the-metaclass">MetaProgramming and the MetaClass</h4>

<p>In addition to a super (parent) class, Groovy classes can also have a <a href="http://docs.groovy-lang.org/latest/html/api/groovy/lang/MetaClass.html">metaclass</a> associated with them at runtime that provides another mechanism to dynamically inject behavior into an existing class. In particular, missing methods can be intercepted before a MissingMethodException is thrown.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Foo</span> <span class="o">{</span>
	<span class="n">String</span> <span class="nf">foo</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="s1">'foo'</span> <span class="o">}</span>
<span class="o">}</span>

<span class="n">Foo</span> <span class="n">foo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Foo</span><span class="o">()</span>
<span class="n">foo</span><span class="o">.</span><span class="na">metaClass</span><span class="o">.</span><span class="na">bar</span> <span class="o">=</span> <span class="o">{</span> <span class="k">return</span> <span class="s1">'bar'</span> <span class="o">}</span>
<span class="n">foo</span><span class="o">.</span><span class="na">metaClass</span><span class="o">.</span><span class="na">methodMissing</span> <span class="o">=</span> <span class="o">{</span> <span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="kt">def</span> <span class="n">args</span> <span class="o">-&gt;</span>
	<span class="k">return</span> <span class="s1">'missing'</span>
<span class="o">}</span>
<span class="k">assert</span> <span class="n">foo</span><span class="o">.</span><span class="na">foo</span><span class="o">()</span> <span class="o">==</span> <span class="s1">'foo'</span>
<span class="k">assert</span> <span class="n">foo</span><span class="o">.</span><span class="na">bar</span><span class="o">()</span> <span class="o">==</span> <span class="s1">'bar'</span> <span class="c1">// added by the metaclass</span>
<span class="k">assert</span> <span class="n">foo</span><span class="o">.</span><span class="na">foobar</span><span class="o">()</span> <span class="o">==</span> <span class="s1">'missing'</span> <span class="c1">// methodMissing()</span>
</code></pre>
</div>

<p>Methods and properties can also be added to existing classes. Consider a simple DSL to make comparing distances easier:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">ExpandoMetaClass</span><span class="o">.</span><span class="na">enableGlobally</span><span class="o">()</span>
<span class="n">Number</span><span class="o">.</span><span class="na">metaClass</span><span class="o">.</span><span class="na">getProperty</span> <span class="o">=</span> <span class="o">{</span> <span class="n">String</span> <span class="n">name</span> <span class="o">-&gt;</span>
	<span class="k">if</span> <span class="o">(</span><span class="n">name</span> <span class="o">==</span> <span class="s1">'inches'</span><span class="o">)</span> <span class="k">return</span> <span class="n">delegate</span>
	<span class="k">if</span> <span class="o">(</span><span class="n">name</span> <span class="o">==</span> <span class="s1">'feet'</span><span class="o">)</span> <span class="k">return</span> <span class="n">delegate</span> <span class="o">*</span> <span class="mi">12</span>
	<span class="k">throw</span> <span class="k">new</span> <span class="nf">MissingPropertyException</span><span class="o">(</span><span class="s2">"Invalid unit: $name"</span><span class="o">)</span>
<span class="o">}</span>
<span class="k">assert</span> <span class="mi">2</span><span class="o">.</span><span class="na">feet</span> <span class="o">==</span> <span class="mi">24</span><span class="o">.</span><span class="na">inches</span>
<span class="n">print</span> <span class="mi">1</span><span class="o">.</span><span class="na">mile</span> <span class="c1">// MissingPropertyException: Invalid unit mile</span>
</code></pre>
</div>

<p><strong>NOTE</strong> The <code class="highlighter-rouge">ExandoMetaClass.enableGlobally()</code> statement is required so that methods and properties that are added dynamically are also available in sub-classes.  The above example adds an implementation for <code class="highlighter-rouge">getProperty</code> to the <code class="highlighter-rouge">Number</code> class while it is called from instances of <code class="highlighter-rouge">Integer</code>.</p>

<h2 id="putting-it-all-together">Putting it all together</h2>

<p>Assume we are unhappy with the Groovy MarkupBuilder class and we would like to write our own Builder that accepted our DSL and returned a tree of <code class="highlighter-rouge">groovy.util.Node</code> objects.  We might start with something like:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">groovy.util.Node</span>

<span class="kd">class</span> <span class="nc">Builder</span> <span class="o">{</span>
	<span class="c1">// The last node constructed by the builder.</span>
	<span class="n">Node</span> <span class="n">node</span>

	<span class="c1">// Catch all missing methods and create a Node with the same name</span>
	<span class="c1">// as the method. args will contain attributes, if any, in a HashMap and</span>
	<span class="c1">// a value that will be a string or a closure.</span>
    <span class="kt">def</span> <span class="nf">methodMissing</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Map</span> <span class="n">atts</span> <span class="o">=</span> <span class="o">[:]</span>
        <span class="kt">def</span> <span class="n">value</span> <span class="o">=</span> <span class="n">args</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">args</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">atts</span> <span class="o">=</span> <span class="n">args</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">args</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">value</span> <span class="k">instanceof</span> <span class="n">Closure</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">node</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Node</span><span class="o">(</span><span class="n">node</span><span class="o">,</span> <span class="n">name</span><span class="o">,</span> <span class="n">atts</span><span class="o">)</span>
            <span class="n">value</span><span class="o">()</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="na">parent</span><span class="o">()</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="k">new</span> <span class="nf">Node</span><span class="o">(</span><span class="n">node</span><span class="o">,</span> <span class="n">name</span><span class="o">,</span> <span class="n">atts</span><span class="o">,</span> <span class="n">value</span><span class="o">)</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="n">Node</span> <span class="nf">build</span><span class="o">(</span><span class="n">Closure</span> <span class="n">cl</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">node</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Node</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> <span class="s1">'dummy_node'</span><span class="o">)</span>
        <span class="n">cl</span><span class="o">.</span><span class="na">delegate</span> <span class="o">=</span> <span class="k">this</span>
        <span class="n">cl</span><span class="o">()</span>
        <span class="k">return</span> <span class="n">node</span><span class="o">.</span><span class="na">children</span><span class="o">()[</span><span class="mi">0</span><span class="o">]</span>
    <span class="o">}</span>
<span class="o">}</span><span class="err">```</span>

<span class="n">We</span> <span class="n">can</span> <span class="n">use</span> <span class="n">our</span> <span class="k">new</span> <span class="n">builder</span> <span class="nl">with:</span>

<span class="err">```</span><span class="n">groovy</span>
<span class="kt">def</span> <span class="n">builder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Builder</span><span class="o">()</span>
<span class="kt">def</span> <span class="n">root</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="na">build</span> <span class="o">{</span>
	<span class="n">inventory</span> <span class="o">{</span>
		<span class="n">part</span> <span class="o">{</span>
			<span class="n">id</span> <span class="s1">'nail'</span>
			<span class="n">cost</span> <span class="mf">1.25</span>
			<span class="n">description</span> <span class="s1">'The pointy bit."
		}
		part {
			id '</span><span class="n">hammer</span><span class="s1">'
			cost 29.95
			description '</span><span class="n">When</span> <span class="n">your</span> <span class="n">only</span> <span class="n">tool</span> <span class="n">is</span> <span class="n">a</span> <span class="n">hammer</span> <span class="n">all</span> <span class="n">your</span> <span class="n">problems</span> <span class="n">look</span> <span class="n">like</span> <span class="n">nails</span><span class="o">.</span><span class="err">'</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>

<span class="c1">// Print our inventory as XML</span>
<span class="n">println</span> <span class="n">XmlUtil</span><span class="o">.</span><span class="na">serialize</span><span class="o">(</span><span class="n">root</span><span class="o">)</span>
</code></pre>
</div>

<h2 id="compiling-groovy-at-runtime">Compiling Groovy at runtime</h2>

<p>The <code class="highlighter-rouge">GroovyShell</code> class makes it easy to compile a String into code that can be executed.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">String</span> <span class="n">code</span> <span class="o">=</span> <span class="s1">'println "hello world"'</span>
<span class="kt">def</span> <span class="n">shell</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GroovyShell</span><span class="o">()</span>
<span class="kt">def</span> <span class="n">script</span> <span class="o">=</span> <span class="n">shell</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">code</span><span class="o">)</span>
<span class="n">script</span><span class="o">.</span><span class="na">run</span><span class="o">()</span>
<span class="c1">// prints hello world</span>
</code></pre>
</div>

<h2 id="references">References</h2>

<ol>
  <li>https://en.wikipedia.org/wiki/Domain-specific_language</li>
</ol>


      <footer class="site-footer">
        
          <span class="site-footer-owner"><a href="https://github.com/lapps/lapps">lapps</a> is maintained by <a href="https://github.com/lapps">lapps</a>.</span>
        
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
      </footer>
    </section>

    
  </body>
</html>